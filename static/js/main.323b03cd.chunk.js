(this["webpackJsonptower-of-hanoi"]=this["webpackJsonptower-of-hanoi"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),s=(n(97),n(9)),c=n(12),l=n(14),u=n(7),h=n(15),m=n(5),d=n(79),f=n(27),g=n(163),p=n(73),b=n.n(p),v=n(166),w=n(28),S=n(62),E=n(149),O=n(74),y=n(23),j=n.n(y),k=n(33),x=n(63),D=n.n(x),N=60,T=20,C=["rgb(215, 169, 227, 0.4)","rgb(139, 190, 232, 0.4)","rgb(168, 213, 186, 0.4)"],I=["#fef200","#9bca3b","#27b252","#0db0a1","#3654a7","#493a98","#92278f","#92296d","#ed1923","#ef4224","#f36522","#f89f1a"],W=function(e){var t=D.a.duration(e,"seconds");return Math.floor(t.asHours())+D.a.utc(t.asMilliseconds()).format(":mm:ss")},A=function(e){for(var t=[],n=1;n<=e;n++)t.push(n);return t},H=function(e){return e[e.length-1]},z=function(e){return e.slice(0,e.length-1)},L=function(e){var t=N,n=T,a=.4*e+.6;return[Math.ceil(t*a),n]},P=function(e,t,n,a){var r=Object(f.a)(t),o=Object(f.a)(n),i=Object(f.a)(a),s="",c=function(e,t,n){e===r?r.pop():e===o?o.pop():i.pop(),t===r?r.push(n):t===o?o.push(n):i.push(n)},l=function(){var e=Object(k.a)(j.a.mark((function e(t,n){var a,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=t;case 1:if(!(u>=1)){e.next=14;break}if(r===n||!r.includes(u)){e.next=5;break}return a=r,e.abrupt("break",14);case 5:if(o===n||!o.includes(u)){e.next=8;break}return a=o,e.abrupt("break",14);case 8:if(i===n||!i.includes(u)){e.next=11;break}return a=i,e.abrupt("break",14);case 11:u--,e.next=1;break;case 14:if(0!==u){e.next=16;break}return e.abrupt("return");case 16:l(u-1,r!==a&&r!==n?r:o!==a&&o!==n?o:i),c(a,n,u),s+="".concat(JSON.stringify({col1:r,col2:o,col3:i}),","),l(u-1,n);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return l(e,o),"[".concat(s.slice(0,-1),"]")};var U=function(e){var t=e.active,n=e.xy,o=e.move,i=e.size,s=e.color,c=e.divWidth,l=L(i),u=Object(w.a)(l,2),h=u[0],m=u[1],d=Object(S.a)((function(){return{x:n[0],y:n[1]}})),f=Object(w.a)(d,2),g=f[0],p=g.x,b=g.y,v=f[1];Object(a.useEffect)((function(){v({x:e.xy[0],y:e.xy[1]})}),[v,e.xy]);var y=Object(a.useState)(1),j=Object(w.a)(y,2),k=j[0],x=j[1],D=r.a.useRef(null),N=Object(O.a)({onDrag:function(e){var n=e.event,a=Object(w.a)(e.xy,2),r=a[0],o=a[1];n.preventDefault(),t&&(v({x:r-h/2,y:o-m/2}),x(99))},onDragEnd:function(e){var n=e.event,a=Object(w.a)(e.xy,2),r=a[0];a[1];if(n.preventDefault(),t){var s=o(r<=c?1:r<=2*c?2:3,i);v({x:s[0],y:s[1]}),x(1)}}},{domTarget:D,eventOptions:{passive:!1}});return r.a.useEffect(N,[N]),r.a.createElement(E.a.div,Object.assign({ref:D},N(),{style:{position:"absolute",x:p,y:b,zIndex:k,width:h,height:m,borderRadius:"20px",background:s,cursor:t?"grab":"default",display:"flex",justifyContent:"center"}}),r.a.createElement("span",{style:{alignSelf:"center"}},i))},B=n(156),J=n(165),G=n(155),Y=n(167),F=n(162),M=n(78),_=n(48),R=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={fetching:!0,highScore:null,submitting:!1,showError:!1},n.renderTimeSubmitForm=function(){var e=n.props.classes;return r.a.createElement(M.a,{onSubmit:n.handleSubmit,initialValues:{name:""}},(function(t){var a=t.handleSubmit,o=t.handleChange,i=t.values;return r.a.createElement("form",{onSubmit:a},r.a.createElement(F.a,{name:"name",label:"Name",helperText:"Enter your name to display on the leaderboard",autoFocus:!0,value:i.name,onChange:function(e){n.setState({showError:!1}),o(e)}}),r.a.createElement(g.a,{className:e.submit,color:"primary",type:"submit",disabled:!i.name},"Submit"))}))},n.handleSubmit=function(e){var t=e.name,a=n.props,r=a.numDisks,o=a.time,i=a.onSubmit;n.setState({submitting:!0},(function(){fetch(_.api_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update-high-scores",NumDisks:r,name:t,time:o})}).then((function(e){return e.json()})).then((function(e){e.success?(n.setState({submitting:!1}),i()):(n.setState({submitting:!1,showError:!0}),console.log(e.message))})).catch((function(e){return console.log("Unable to connect to API.",e)}))}))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.numDisks;fetch(_.api_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get-high-scores"})}).then((function(e){return e.json()})).then((function(n){if(n.success){var a=n.highScores.filter((function(e){return e.NumDisks===t}));e.setState({fetching:!1,highScore:a.length?a[0]:null})}else e.setState({fetching:!1}),console.log(n.message)})).catch((function(e){return console.log("Unable to connect to API.",e)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.numDisks,a=e.time,o=e.onClose,i=this.state,s=i.fetching,c=i.highScore,l=i.submitting,u=i.showError;return r.a.createElement("div",null,r.a.createElement(J.a,{className:t.root,open:!0,onClose:o},r.a.createElement(Y.a,null,"Your time is ",W(a),"!"),r.a.createElement(G.a,{className:t.content},s?r.a.createElement(B.a,null):c?a<c.time?r.a.createElement("div",null,r.a.createElement("div",null,"You beat the current high score of"," ",r.a.createElement("strong",null,c.name)," of"," ",r.a.createElement("strong",null,W(c.time))," for ",n," ","disk(s)."),r.a.createElement("br",null),l?r.a.createElement(B.a,null):this.renderTimeSubmitForm()):r.a.createElement("div",null,r.a.createElement("div",null,"You haven't beaten the current high score of"," ",r.a.createElement("strong",null,c.name)," of"," ",r.a.createElement("strong",null,W(c.time))," for ",n," ","disk(s)."),r.a.createElement("p",null,"Try again!")):r.a.createElement("div",null,r.a.createElement("div",null,"There is no high score for now for ",n," disk(s)."),r.a.createElement("br",null),l?r.a.createElement(B.a,null):this.renderTimeSubmitForm()),u&&r.a.createElement("p",{className:t.error},"Something went wrong. Try again later."))))}}]),t}(r.a.Component),V=Object(m.a)({root:{textAlign:"center"},content:{marginBottom:20},submit:{marginTop:10},error:{color:"#f44336"}})(R),$=n(157),q=n(161),K=n(160),Q=n(158),X=n(159),Z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.fetching,o=e.highScores,i=e.onClose;return r.a.createElement(J.a,{className:t.root,open:n,onClose:i},r.a.createElement(Y.a,null,"Leaderboard"),r.a.createElement(G.a,{className:t.content},a?r.a.createElement(B.a,null):o.length?r.a.createElement($.a,{size:"small"},r.a.createElement(Q.a,null,r.a.createElement(X.a,null,r.a.createElement(K.a,null,"No. Disks"),r.a.createElement(K.a,{align:"right"},"Name"),r.a.createElement(K.a,{align:"right"},"Time"))),r.a.createElement(q.a,null,o.map((function(e){var t=e.time;return r.a.createElement(X.a,{key:e.NumDisks},r.a.createElement(K.a,{component:"th",scope:"row"},e.NumDisks),r.a.createElement(K.a,{align:"right"},e.name),r.a.createElement(K.a,{align:"right"},W(t)))})))):"There are no high scores for now."))}}]),t}(r.a.Component),ee=Object(m.a)({root:{textAlign:"center"},content:{marginBottom:20}})(Z),te=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={handler:null,seconds:0},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(!e.running&&this.props.running){var n=setInterval((function(){var e=t.state.seconds;t.setState({seconds:e+1})}),1e3);this.setState({handler:n})}if(e.running&&!this.props.running){var a=this.state.handler;clearInterval(a),e.disabled||this.props.disabled||this.props.recordTime(this.state.seconds)}}},{key:"componentWillUnmount",value:function(){var e=this.state.handler;clearInterval(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.disabled,a=e.recordTime,o=this.state.seconds;return r.a.createElement("div",{style:{color:n?"#f44336":"inherit"}},r.a.createElement("div",{className:t.time,onClick:function(){return a(o)}},W(o)),n&&r.a.createElement("div",{className:t.warning},"Time is now invalid!"))}}]),t}(r.a.Component),ne=Object(m.a)({time:{width:"fit-content",margin:"auto",cursor:"pointer"},warning:{marginTop:10}})(te),ae=I,re=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={col1:A(n.props.numDisks).reverse(),col2:[],col3:[],solving:!1,handler:null,step:0,showLeaderboard:!1,fetching:!1,highScores:[],isTiming:!1,time:null,hasUsedSolve:!1,showGameOver:!1,hasSubmitted:!1,showSubmissionSuccess:!1},n.isGameOver=function(){var e=n.props.numDisks,t=n.state,a=t.col2,r=t.col3;return a.length===e||r.length===e},n.getIsActive=function(e){var t=n.state,a=t.col1,r=t.col2,o=t.col3;return!t.solving&&!n.isGameOver()&&(H(a)===e||H(r)===e||H(o)===e)},n.getPosition=function(e,t,a,r){var o=n.props.windowWidth/6,i=L(r)[0];return e.includes(r)?[o-i/2,n.getY(e,r)]:t.includes(r)?[3*o-i/2,n.getY(t,r)]:[5*o-i/2,n.getY(a,r)]},n.getY=function(e,t){for(var a=n.props.windowHeight-150-L(t)[1],r=0;e[r]!==t;)a-=L(e[r])[1],r++;return a},n.move=function(e,t){n.state.hasUsedSolve||n.setState({isTiming:!0});var a=n.state,r=a.col1,o=a.col2,i=a.col3,s=r.includes(t)?r:o.includes(t)?o:i,c=1===e?r:2===e?o:i;if(s===c||t>H(c))return n.getPosition(r,o,i,t);var l=z(s),u=[].concat(Object(f.a)(c),[t]),h=r===s?l:r===c?u:r,m=o===s?l:o===c?u:o,d=i===s?l:i===c?u:i;return n.setState({col1:h,col2:m,col3:d}),n.getPosition(h,m,d,t)},n.solve=function(){n.setState({isTiming:!1,hasUsedSolve:!0});var e=n.props.numDisks,t=n.state,a=t.col1,r=t.col2,o=t.col3,i=JSON.parse(P(e,Object(f.a)(a),Object(f.a)(r),Object(f.a)(o)));n.setState({solving:!0,steps:i,step:0},(function(){var e=setInterval((function(){var t=n.state,a=t.steps,r=t.step;r<a.length?n.setState(Object(d.a)({},a[r],{step:r+1})):clearInterval(e)}),1e3);n.setState({handler:e})}))},n.stop=function(){var e=n.state.handler;n.setState({solving:!1},(function(){return clearInterval(e)}))},n.showLeaderboard=function(){var e=n.state,t=e.solving,a=e.handler;t?n.setState({solving:!1,showLeaderboard:!0,fetching:!0},(function(){n.fetchHighScores(),clearInterval(a)})):n.setState({showLeaderboard:!0,fetching:!0},n.fetchHighScores)},n.fetchHighScores=function(){fetch(_.api_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get-high-scores"})}).then((function(e){return e.json()})).then((function(e){e.success?n.setState({fetching:!1,highScores:e.highScores.sort((function(e,t){return e.NumDisks-t.NumDisks}))}):(n.setState({fetching:!1}),console.log(e.message))})).catch((function(e){return console.log("Unable to connect to API.",e)}))},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.state.handler;e&&clearInterval(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.numDisks,o=t.windowWidth,i=t.windowHeight,s=t.restart,c=this.state,l=c.col1,u=c.col2,h=c.col3,m=c.solving,d=c.showLeaderboard,f=c.fetching,p=c.highScores,w=c.isTiming,S=c.time,E=c.hasUsedSolve,O=c.showGameOver,y=c.hasSubmitted,j=c.showSubmissionSuccess,k=o/3,x=this.isGameOver();return r.a.createElement("div",null,r.a.createElement("div",{className:n.controlButtons},!m&&r.a.createElement(g.a,{color:"primary",disabled:x,onClick:this.solve},"Solve"),m&&r.a.createElement(g.a,{color:"primary",disabled:x,onClick:this.stop},"Stop"),r.a.createElement(g.a,{color:"secondary",onClick:s},"Restart")),r.a.createElement("div",{className:n.leaderboardButton},r.a.createElement(g.a,{onClick:this.showLeaderboard},"Leaderboard")),r.a.createElement("div",{className:n.timer},r.a.createElement(ne,{running:w&&!x,disabled:E,recordTime:function(t){return e.setState({time:t,showGameOver:!0})}})),r.a.createElement(ee,{open:d,fetching:f,highScores:p,onClose:function(){return e.setState({showLeaderboard:!1})}}),O&&x&&!E&&!y&&r.a.createElement(V,{numDisks:a,time:S,onClose:function(){return e.setState({showGameOver:!1})},onSubmit:function(){return e.setState({hasSubmitted:!0,showSubmissionSuccess:!0})}}),j&&r.a.createElement(v.a,{className:n.success,open:!0,message:"High score submitted!",onClose:function(){return e.setState({showSubmissionSuccess:!1})}}),x&&r.a.createElement(b.a,{width:o,height:i}),A(a).map((function(t){return r.a.createElement(U,{key:t,active:e.getIsActive(t),xy:e.getPosition(l,u,h,t),move:e.move,size:t,color:ae[t-1],divWidth:k})})))}}]),t}(r.a.Component),oe=Object(m.a)({controlButtons:{position:"absolute",top:30,left:0,right:0,display:"flex",justifyContent:"center"},leaderboardButton:{position:"absolute",top:70,left:0,right:0},timer:{position:"absolute",top:110,left:0,right:0},success:{width:"fit-content",margin:"auto"}})(re),ie=I.length,se=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1},n.handleSubmit=function(e){e.preventDefault();var t=new FormData(e.target),a=parseInt(t.get("numDisks"));A(ie).includes(a)?n.props.setNumDisks(a):n.setState({error:!0})},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.error;return r.a.createElement("div",{className:e.root},r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},r.a.createElement(F.a,{name:"numDisks",label:"Number of Disks",helperText:"Enter a number up to ".concat(ie),autoFocus:!0,error:t})))}}]),t}(r.a.Component),ce=Object(m.a)({root:{marginTop:30}})(se),le=C,ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={windowWidth:window.innerWidth,windowHeight:window.innerHeight,initializing:!0,numDisks:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",(function(t){var n=t.target;return e.setState({windowWidth:n.innerWidth,windowHeight:n.innerHeight})}))}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=n.windowWidth,o=n.windowHeight,i=n.initializing,s=n.numDisks,c=a/3,l=o-150;return r.a.createElement("div",null,r.a.createElement("div",{className:t.overground},r.a.createElement("div",{style:{width:c,height:l,background:le[0]}}),r.a.createElement("div",{style:{width:c,height:l,background:le[1]}}),r.a.createElement("div",{style:{width:c,height:l,background:le[2]}}),r.a.createElement("div",{className:t.game},i?r.a.createElement(ce,{setNumDisks:function(t){return e.setState({initializing:!1,numDisks:t})}}):r.a.createElement(oe,{numDisks:s,windowWidth:a,windowHeight:o,restart:function(){return e.setState({initializing:!0})}}))),r.a.createElement("div",{style:{width:a,height:150,background:"gainsboro"}}))}}]),t}(r.a.Component),he=Object(m.a)({overground:{position:"relative",display:"flex",userSelect:"none"},game:{position:"absolute",left:0,right:0,textAlign:"center"}})(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e){e.exports=JSON.parse('{"api_endpoint":"https://sh3006jwh7.execute-api.us-east-2.amazonaws.com/prod/high-scores"}')},92:function(e,t,n){e.exports=n(112)},97:function(e,t,n){}},[[92,1,2]]]);
//# sourceMappingURL=main.323b03cd.chunk.js.map