{"version":3,"sources":["constants.js","helpers.js","components/Disk.js","components/Controller.js","components/Initializer.js","App.js","serviceWorker.js","index.js"],"names":["constants","get1ToN","n","result","i","push","getLast","array","length","getUpToSecondLast","slice","getMeasurements","size","BASE_WIDTH","BASE_HEIGHT","multiplier","Math","ceil","solve","numDisks","initCol1","initCol2","initCol3","col1","col2","col3","steps","moveDisk","fromCol","toCol","pop","moveDisks","maxSize","a","includes","JSON","stringify","Disk","props","active","xy","move","color","divWidth","width","height","useSpring","x","y","setPosition","useEffect","useState","zIndex","setZIndex","myRef","React","useRef","bind","useGesture","onDrag","event","preventDefault","onDragEnd","moveTo","domTarget","eventOptions","passive","div","ref","style","position","borderRadius","background","cursor","display","justifyContent","alignSelf","DISK_COLORS","Controller","state","reverse","solving","handler","step","isGameOver","getIsActive","getPosition","halfDivWidth","windowWidth","diskWidth","getY","col","windowHeight","colNum","newFromCol","newToCol","newCol1","newCol2","newCol3","setState","parse","setInterval","clearInterval","stop","this","restart","top","left","right","Button","disabled","onClick","map","key","Component","maxNumDisks","Initializer","error","handleSubmit","data","FormData","target","parseInt","get","setNumDisks","marginTop","onSubmit","noValidate","autoComplete","TextField","name","label","helperText","autoFocus","DIV_COLORS","App","window","innerWidth","innerHeight","initializing","addEventListener","divHeight","userSelect","textAlign","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message"],"mappings":"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","file":"static/js/main.d20b4ec4.chunk.js","sourcesContent":["export const constants = {\r\n  BASE_WIDTH: 60,\r\n  BASE_HEIGHT: 20,\r\n  DIV_COLORS: [\r\n    \"rgb(215, 169, 227, 0.4)\",\r\n    \"rgb(139, 190, 232, 0.4)\",\r\n    \"rgb(168, 213, 186, 0.4)\"\r\n  ],\r\n  DISK_COLORS: [\r\n    // 12 colors, referenced from\r\n    // https://venngage.com/blog/how-to-pick-colors/\r\n    \"#fef200\",\r\n    \"#9bca3b\",\r\n    \"#27b252\",\r\n    \"#0db0a1\",\r\n    \"#3654a7\",\r\n    \"#493a98\",\r\n    \"#92278f\",\r\n    \"#92296d\",\r\n    \"#ed1923\",\r\n    \"#ef4224\",\r\n    \"#f36522\",\r\n    \"#f89f1a\"\r\n  ]\r\n};\r\n","import { constants } from \"./constants\";\r\n\r\nexport const get1ToN = n => {\r\n  const result = [];\r\n  for (let i = 1; i <= n; i++) {\r\n    result.push(i);\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getLast = array => array[array.length - 1];\r\n\r\nexport const getUpToSecondLast = array => array.slice(0, array.length - 1);\r\n\r\nexport const getMeasurements = size => {\r\n  const { BASE_WIDTH, BASE_HEIGHT } = constants;\r\n  const multiplier = size * 0.4 + 0.6;\r\n  return [Math.ceil(BASE_WIDTH * multiplier), BASE_HEIGHT];\r\n};\r\n\r\nexport const solve = (numDisks, initCol1, initCol2, initCol3) => {\r\n  let col1 = [...initCol1];\r\n  let col2 = [...initCol2];\r\n  let col3 = [...initCol3];\r\n\r\n  let steps = \"\";\r\n\r\n  const moveDisk = (fromCol, toCol, size) => {\r\n    if (fromCol === col1) {\r\n      col1.pop();\r\n    } else if (fromCol === col2) {\r\n      col2.pop();\r\n    } else {\r\n      col3.pop();\r\n    }\r\n\r\n    if (toCol === col1) {\r\n      col1.push(size);\r\n    } else if (toCol === col2) {\r\n      col2.push(size);\r\n    } else {\r\n      col3.push(size);\r\n    }\r\n  };\r\n\r\n  // algorithm from\r\n  // https://stackoverflow.com/questions/49220476/tower-of-hanoi-solving-halfway-algorithm-in-python\r\n  const moveDisks = async (maxSize, toCol) => {\r\n    let fromCol;\r\n    let size = maxSize;\r\n    while (size >= 1) {\r\n      if (col1 !== toCol && col1.includes(size)) {\r\n        fromCol = col1;\r\n        break;\r\n      }\r\n      if (col2 !== toCol && col2.includes(size)) {\r\n        fromCol = col2;\r\n        break;\r\n      }\r\n      if (col3 !== toCol && col3.includes(size)) {\r\n        fromCol = col3;\r\n        break;\r\n      }\r\n      size--;\r\n    }\r\n\r\n    // all disks are already in the to-column\r\n    if (size === 0) {\r\n      return;\r\n    }\r\n\r\n    const otherCol =\r\n      col1 !== fromCol && col1 !== toCol\r\n        ? col1\r\n        : col2 !== fromCol && col2 !== toCol\r\n        ? col2\r\n        : col3;\r\n\r\n    moveDisks(size - 1, otherCol);\r\n\r\n    moveDisk(fromCol, toCol, size);\r\n    steps += `${JSON.stringify({ col1, col2, col3 })},`;\r\n\r\n    moveDisks(size - 1, toCol);\r\n  };\r\n\r\n  moveDisks(numDisks, col2);\r\n\r\n  return `[${steps.slice(0, -1)}]`;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSpring, animated } from \"react-spring\";\r\nimport { useGesture } from \"react-use-gesture\";\r\n\r\nimport { getMeasurements } from \"../helpers\";\r\n\r\nfunction Disk(props) {\r\n  const { active, xy, move, size, color, divWidth } = props;\r\n  const [width, height] = getMeasurements(size);\r\n\r\n  // spring to smoothen drag\r\n  const [{ x, y }, setPosition] = useSpring(() => ({ x: xy[0], y: xy[1] }));\r\n\r\n  // move disks via props.xy\r\n  useEffect(() => {\r\n    setPosition({ x: props.xy[0], y: props.xy[1] });\r\n  }, [setPosition, props.xy]);\r\n\r\n  // z-index to put moving disk in front\r\n  const [zIndex, setZIndex] = useState(1);\r\n\r\n  const myRef = React.useRef(null);\r\n\r\n  const bind = useGesture(\r\n    {\r\n      onDrag: ({ event, xy: [x, y] }) => {\r\n        event.preventDefault();\r\n        if (active) {\r\n          setPosition({ x: x - width / 2, y: y - height / 2 });\r\n          setZIndex(99);\r\n        }\r\n      },\r\n      onDragEnd: ({ event, xy: [x, y] }) => {\r\n        event.preventDefault();\r\n        if (active) {\r\n          const colNum = x <= divWidth ? 1 : x <= 2 * divWidth ? 2 : 3;\r\n          const moveTo = move(colNum, size);\r\n          setPosition({ x: moveTo[0], y: moveTo[1] });\r\n          setZIndex(1);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      domTarget: myRef,\r\n      eventOptions: { passive: false }\r\n    }\r\n  );\r\n\r\n  React.useEffect(bind, [bind]);\r\n\r\n  return (\r\n    <animated.div\r\n      ref={myRef}\r\n      {...bind()}\r\n      style={{\r\n        position: \"absolute\",\r\n        x,\r\n        y,\r\n        zIndex,\r\n        width,\r\n        height,\r\n        borderRadius: \"20px\",\r\n        background: color,\r\n        cursor: active ? \"grab\" : \"default\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\"\r\n      }}\r\n    >\r\n      <span style={{ alignSelf: \"center\" }}>{size}</span>\r\n    </animated.div>\r\n  );\r\n}\r\n\r\nexport default Disk;\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Confetti from \"react-confetti\";\r\n\r\nimport Disk from \"./Disk\";\r\nimport {\r\n  get1ToN,\r\n  getLast,\r\n  getUpToSecondLast,\r\n  getMeasurements,\r\n  solve\r\n} from \"../helpers\";\r\nimport { constants } from \"../constants\";\r\n\r\nconst { DISK_COLORS } = constants;\r\n\r\nclass Controller extends React.Component {\r\n  state = {\r\n    col1: get1ToN(this.props.numDisks).reverse(),\r\n    col2: [],\r\n    col3: [],\r\n    solving: false,\r\n    handler: null,\r\n    step: 0\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    const { handler } = this.state;\r\n    if (handler) {\r\n      clearInterval(handler);\r\n    }\r\n  }\r\n\r\n  isGameOver = () => {\r\n    const { numDisks } = this.props;\r\n    const { col2, col3 } = this.state;\r\n    return col2.length === numDisks || col3.length === numDisks;\r\n  };\r\n\r\n  getIsActive = size => {\r\n    const { col1, col2, col3, solving } = this.state;\r\n    return (\r\n      !solving &&\r\n      !this.isGameOver() &&\r\n      (getLast(col1) === size ||\r\n        getLast(col2) === size ||\r\n        getLast(col3) === size)\r\n    );\r\n  };\r\n\r\n  getPosition = (col1, col2, col3, size) => {\r\n    const { windowWidth } = this.props;\r\n    const halfDivWidth = windowWidth / 6;\r\n    const diskWidth = getMeasurements(size)[0];\r\n    if (col1.includes(size)) {\r\n      const x = halfDivWidth - diskWidth / 2;\r\n      const y = this.getY(col1, size);\r\n      return [x, y];\r\n    }\r\n\r\n    if (col2.includes(size)) {\r\n      const x = halfDivWidth * 3 - diskWidth / 2;\r\n      const y = this.getY(col2, size);\r\n      return [x, y];\r\n    }\r\n\r\n    const x = halfDivWidth * 5 - diskWidth / 2;\r\n    const y = this.getY(col3, size);\r\n    return [x, y];\r\n  };\r\n\r\n  getY = (col, size) => {\r\n    const { windowHeight } = this.props;\r\n    const divHeight = windowHeight - 150;\r\n    const diskHeight = getMeasurements(size)[1];\r\n    let y = divHeight - diskHeight;\r\n    let i = 0;\r\n    while (col[i] !== size) {\r\n      y -= getMeasurements(col[i])[1];\r\n      i++;\r\n    }\r\n    return y;\r\n  };\r\n\r\n  move = (colNum, size) => {\r\n    const { col1, col2, col3 } = this.state;\r\n    // prettier-ignore\r\n    const fromCol = col1.includes(size) ? col1 : col2.includes(size) ? col2 : col3;\r\n    const toCol = colNum === 1 ? col1 : colNum === 2 ? col2 : col3;\r\n\r\n    if (fromCol === toCol || size > getLast(toCol)) {\r\n      return this.getPosition(col1, col2, col3, size);\r\n    }\r\n\r\n    const newFromCol = getUpToSecondLast(fromCol);\r\n    const newToCol = [...toCol, size];\r\n\r\n    // prettier-ignore\r\n    const newCol1 = col1 === fromCol ? newFromCol : col1 === toCol ? newToCol : col1\r\n    // prettier-ignore\r\n    const newCol2 = col2 === fromCol ? newFromCol : col2 === toCol ? newToCol : col2\r\n    // prettier-ignore\r\n    const newCol3 = col3 === fromCol ? newFromCol : col3 === toCol ? newToCol : col3\r\n\r\n    this.setState({\r\n      col1: newCol1,\r\n      col2: newCol2,\r\n      col3: newCol3\r\n    });\r\n    return this.getPosition(newCol1, newCol2, newCol3, size);\r\n  };\r\n\r\n  solve = () => {\r\n    const { numDisks } = this.props;\r\n    const { col1, col2, col3 } = this.state;\r\n    const steps = JSON.parse(solve(numDisks, [...col1], [...col2], [...col3]));\r\n    this.setState({ solving: true, steps, step: 0 }, () => {\r\n      const handler = setInterval(() => {\r\n        const { steps, step } = this.state;\r\n        if (step < steps.length) {\r\n          this.setState({ ...steps[step], step: step + 1 });\r\n        } else {\r\n          clearInterval(handler);\r\n        }\r\n      }, 1000);\r\n      this.setState({ handler });\r\n    });\r\n  };\r\n\r\n  stop = () => {\r\n    const { handler } = this.state;\r\n    this.setState({ solving: false }, () => clearInterval(handler));\r\n  };\r\n\r\n  render() {\r\n    const { numDisks, windowWidth, windowHeight, restart } = this.props;\r\n    const { col1, col2, col3, solving } = this.state;\r\n    const divWidth = windowWidth / 3;\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 30,\r\n            left: 0,\r\n            right: 0,\r\n            display: \"flex\",\r\n            justifyContent: \"center\"\r\n          }}\r\n        >\r\n          {!solving && (\r\n            <Button\r\n              color='primary'\r\n              disabled={this.isGameOver()}\r\n              onClick={this.solve}\r\n            >\r\n              Solve\r\n            </Button>\r\n          )}\r\n          {solving && (\r\n            <Button\r\n              color='primary'\r\n              disabled={this.isGameOver()}\r\n              onClick={this.stop}\r\n            >\r\n              Stop\r\n            </Button>\r\n          )}\r\n          <Button color='secondary' onClick={restart}>\r\n            Restart\r\n          </Button>\r\n        </div>\r\n\r\n        {this.isGameOver() && (\r\n          <Confetti width={windowWidth} height={windowHeight} />\r\n        )}\r\n\r\n        {get1ToN(numDisks).map(size => (\r\n          <Disk\r\n            key={size}\r\n            active={this.getIsActive(size)}\r\n            xy={this.getPosition(col1, col2, col3, size)}\r\n            move={this.move}\r\n            size={size}\r\n            color={DISK_COLORS[size - 1]}\r\n            divWidth={divWidth}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Controller;\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport { get1ToN } from \"../helpers\";\r\nimport { constants } from \"../constants\";\r\n\r\nconst { DISK_COLORS } = constants;\r\nconst maxNumDisks = DISK_COLORS.length;\r\n\r\nclass Initializer extends React.Component {\r\n  state = { error: false };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const data = new FormData(event.target);\r\n    const numDisks = parseInt(data.get(\"numDisks\"));\r\n    if (get1ToN(maxNumDisks).includes(numDisks)) {\r\n      this.props.setNumDisks(numDisks);\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    return (\r\n      <div style={{ marginTop: 30 }}>\r\n        <form onSubmit={this.handleSubmit} noValidate autoComplete='off'>\r\n          <TextField\r\n            name='numDisks'\r\n            label='Number of Disks'\r\n            helperText={`Enter a number up to ${maxNumDisks}`}\r\n            autoFocus={true}\r\n            error={error}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Initializer;\r\n","import React from \"react\";\r\n\r\nimport Controller from \"./components/Controller\";\r\nimport Initializer from \"./components/Initializer\";\r\nimport { constants } from \"./constants\";\r\n\r\nconst { DIV_COLORS } = constants;\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    windowWidth: window.innerWidth,\r\n    windowHeight: window.innerHeight,\r\n    initializing: true,\r\n    numDisks: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", ({ target }) =>\r\n      this.setState({\r\n        windowWidth: target.innerWidth,\r\n        windowHeight: target.innerHeight\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { windowWidth, windowHeight, initializing, numDisks } = this.state;\r\n    const divWidth = windowWidth / 3;\r\n    const divHeight = windowHeight - 150;\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{ position: \"relative\", display: \"flex\", userSelect: \"none\" }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: divWidth,\r\n              height: divHeight,\r\n              background: DIV_COLORS[0]\r\n            }}\r\n          />\r\n          <div\r\n            style={{\r\n              width: divWidth,\r\n              height: divHeight,\r\n              background: DIV_COLORS[1]\r\n            }}\r\n          />\r\n          <div\r\n            style={{\r\n              width: divWidth,\r\n              height: divHeight,\r\n              background: DIV_COLORS[2]\r\n            }}\r\n          />\r\n\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              left: 0,\r\n              right: 0,\r\n              textAlign: \"center\"\r\n            }}\r\n          >\r\n            {initializing ? (\r\n              <Initializer\r\n                setNumDisks={numDisks =>\r\n                  this.setState({ initializing: false, numDisks })\r\n                }\r\n              />\r\n            ) : (\r\n              <Controller\r\n                numDisks={numDisks}\r\n                windowWidth={windowWidth}\r\n                windowHeight={windowHeight}\r\n                restart={() => this.setState({ initializing: true })}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            width: windowWidth,\r\n            height: 150,\r\n            background: \"gainsboro\"\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}